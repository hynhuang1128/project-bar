### 提醒模块控制逻辑说明

#### 如何开启/关闭：

- 通过长按手控板上的“设置”按键

  - 长按“设置”上升一下意味着提醒功能开启
  - 长按“设置”下降一下意味着提醒功能关闭

- 通过手机端发送数据

  - 通过新建的特征值Characteristic F进行数据通讯

    Characteristic F

    - 一共5个字节
    - 可读/可写
    - 数据一分钟更新一次（所以可以读取到用户的桌子还有多长时间会自动动作）

  - 通讯数据格式

  |      | 字节0                           | 字节1         | 字节2         | 字节3         | 字节4         |
  | ---- | ----------------------------- | ----------- | ----------- | ----------- | ----------- |
  | 格式   | 0x80/0x81/0x82 0x00/0x01/0x02 | 0x00 - 0xff | 0x00 - 0xff | 0x00 - 0xff | 0x00 - 0xff |
  | 说明   | 提醒模式及提醒功能是否开始                 | 站立持续时间高字节   | 站立持续时间低字节   | 坐姿持续时间高字节   | 坐姿持续时间低字节   |

  - 开启提醒

    ​	第一个字节（字节0）的最高位值为判断当前桌子是否开启自动工作模式的标志。当该位置1时，说明提醒模式已经开启，当该位置0时，说明提醒模式已经关闭。

    ​	所以若开启提醒模式则需要将发送的第一个字节的最高位置1。第一个字节的低四位代表的是提醒模式的描述，细节参照下面关于提醒模式的讲解。剩下的4个字节可以任意设置，其中第二、三字节为站立持续时间，第四、五字节为坐姿持续时间，所有持续时间的单位均为秒。

  - 提醒模式讲解

    一共有三种提醒模式：

    - 隐秘模式

      ​	隐秘模式下，第一个字节（字节0）的低四位值为0000，在这种模式下，在提醒功能使能时，桌子不会有任何的提醒动作，仅仅有计时的功能。

      ​	*注：在倒计时时间已到时不会重新开始计时。*

    - 轻微模式

      ​	轻微模式下，字节0的低四位值为0001，在这种模式下，提醒功能开启且桌子提醒倒计时时间已到时，若用户桌子姿态为站姿，则桌子会下降5mm以示提醒；若用户桌子为坐姿，则桌子会上升5mm以示提醒。

      ​	*注：如果提醒后用户没有改变自己的桌子姿态，桌子会重新计时，在倒计时时间到时会再次提醒用户。*

    - 强制模式

      ​	强制模式下，字节0的低四位值为0010，在这种模式下，提醒功能开启且桌子提醒倒计时时间已到时，若用户桌子姿态为站姿，则桌子会自动动作到用户坐姿预设高度（预设高度1），若用户桌子姿态为坐姿，则桌子会自动动作到用户站姿预设高度（预设高度2）。

      ​	*注：在动作过程中，任意按键及指令都会停止当前动作。*

  - 关闭方式

    ​	只需将发送的数据全部设置为0即可关闭提醒功能，需要注意的是，如果希望保留桌子的提醒模式，则需要在关闭时，将发送数据的第一个字节的低四位设置为1111。如果不需要保留桌子的提醒模式，则将发送的数据全部设置为0。

#### 备注：

- 如果已经开启自动升降功能且用户在桌子未开始自动升/降时，将桌子动作到更改姿态的范围。则设备开始重新计时，且下一个自动动作切换到与当前姿态所不同的姿态。
- 桌子自动升降功能会根据户的第一个记忆位置，和第二个记忆位置来进行设置。如果第一个记忆位置大于用户姿态判断阈值高度，或者第二个记忆位置小于用户姿态判断阈值高度的话，则不开启自动升降功能。
- 如果断电后重新上电，提醒功能会自动关闭，但是上次所设置的时间和提醒模式都会保留。